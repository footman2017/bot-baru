intents:
  intent_pagi:
    type: text
    initial: true
    classifier:
      nlu: nlu_greeting
      match: greeting_pagi

  intent_siang:
    type: text
    initial: true
    classifier:
      nlu: nlu_greeting
      match: greeting_siang

  intent_sore:
    type: text
    initial: true
    classifier:
      nlu: nlu_greeting
      match: greeting_sore

  intent_malam:
    type: text
    initial: true
    classifier:
      nlu: nlu_greeting
      match: greeting_malam

  intent_sapa:
    type: text
    initial: true
    classifier:
      nlu: nlu_greeting
      match: hi

  intent_input_nik:
    type: text
    initial: false
    classifier:
      nlu: nlu_regex_nik
    attributes:
      nik:
        nlu: nlu_regex_nik
states:
  state_initial:
    initial: true
    transitions:
      state_pagi:
        condition: intent == 'intent_pagi'
      state_siang:
        condition: intent == 'intent_siang'
      state_sore:
        condition: intent == 'intent_sore'
      state_malam:
        condition: intent == 'intent_malam'
      state_sapa:
        condition: intent == "intent_sapa"

  state_pagi:
    action:
      - name: act_pagi
      - name: action_first
        condition: metadata.channelType == 'telegram'
      - name: action_second
        condition: metadata.channelType == 'line'
    end: true

  state_siang:
    action:
      - name: act_siang
    end: true

  state_sore:
    action:
      - name: act_sore
    end: true

  state_malam:
    action:
      - name: act_malam
    end: true

  state_sapa:
    transitions:
      state_get_nik:
        condition: intent=="intent_input_nik"
        mapping:
          data.nik: attributes.nik
      state_sapa:
        fallback: true
    action:
      - name: act_sapa
      - name: act_tanya_nik

  state_get_nik:
    action:
      - name: act_done_nik
    end: true

actions:
  act_pagi:
    type: text
    options:
      text:
        - pagi

  act_siang:
    type: text
    options:
        text:
          - siang

  act_sore:
    type: text
    options:
        text:
          - sore
          
  act_malam:
    type: text
    options:
        text:
          - malam
  
  action_first:
    type: text
    options:
      text:
        - aksi pertama

  action_second:
    type: text
    options:
      text:
        - aksi kedua
  
  act_sapa:
    type: text
    options: 
      text:
        - hi juga
        - hallo juga
  
  act_tanya_nik:
    type: text
    options:
      text:
        - Silahkan masukan nik anda 12-13 karakter !

  act_done_nik:
    type: text
    options:
      text:
        - NIK $(data.nik) terdaftar, terima kasih